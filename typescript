Script started on 2025-07-28 09:43:15+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="209" LINES="58"]
[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system[00m$ cd scripts/
[?2004l[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system/scripts[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system/scripts[00m$ ls
[?2004l[0m[01;32mhealthcheck.sh[0m
[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system/scripts[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system/scripts[00m$ nano test0[K-redis.py
[?2004l[?2004h[?1049h[22;0;0t[1;58r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[56;99H(B[0;7m[ New File ](B[m[H(B[0;7m  GNU nano 7.2                                                                                      test-redis.py                                                                                                [1;208H(B[m[57d(B[0;7m^G(B[m Help[57;18H(B[0;7m^O(B[m Write Out     (B[0;7m^W(B[m Where Is[52G(B[0;7m^K(B[m Cut[57;69H(B[0;7m^T(B[m Execute[86G(B[0;7m^C(B[m Location[103G(B[0;7mM-U(B[m Undo[57;120H(B[0;7mM-A(B[m Set Mark     (B[0;7mM-](B[m To Bracket   (B[0;7mM-Q(B[m Previous     (B[0;7m^B(B[m Back[57;188H(B[0;7m^◂(B[m Prev Word[58d(B[0;7m^X(B[m Exit[58;18H(B[0;7m^R(B[m Read File     (B[0;7m^\(B[m Replace[52G(B[0;7m^U(B[m Paste[58;69H(B[0;7m^J(B[m Justify[86G(B[0;7m^/(B[m Go To Line    (B[0;7mM-E(B[m Redo[58;120H(B[0;7mM-6(B[m Copy[58;137H(B[0;7m^Q(B[m Where Was     (B[0;7mM-W(B[m Next[58;171H(B[0;7m^F(B[m Forward[188G(B[0;7m^▸(B[m Next Word[2d[?12l[?25h[?25l[56d[K[1;115H(B[0;7m*[208G(B[m[2d[42m    [3d(B[0;1m[31m # Connect to Redis[4;5H[39m(B[mr = connect_redis()[5d[42m    [6d(B[0;1m[36mtry[39m(B[m:[7d(B[0;1m[31m # Run all tests[8;9H[39m(B[mtest_basic_operations(r)[9;9Htest_caching_strategies(r)[10;9Htest_performance(r)[11;9Htest_expiration_and_cleanup(r)[12;9Htest_memory_usage(r)[13;8H[42m[1K[14;9H[49m(B[mprint((B[0;1m[32m"(B[0m[38;5;148m\n(B[0;1m[32m✅ All Redis tests completed successfully!"[39m(B[m)[15;8H[42m[1K[16d(B[0;1m[31m # Optional: Clean up test data[17;9H[39m(B[mresponse = input((B[0;1m[32m"(B[0m[38;5;148m\n(B[0;1m[32mClean up test data? (y/N): "[39m(B[m)[18;9H(B[0;1m[36mif[39m(B[m response.lower() == (B[0;1m[32m'y'[39m(B[m:[19;13Hcleanup_test_data(r)[20;8H[42m[1K[21;5H(B[0;1m[36mexcept[39m(B[m Exception (B[0;1m[36mas[39m(B[m e:[22;9Hprint(f(B[0;1m[32m"(B[0m[38;5;148m\n(B[0;1m[32m❌ Test failed: {e}"[39m(B[m)[23;9Hsys.exit(1)[24d[42m    [25d(B[0;1m[36mfinally[39m(B[m:[26;9Hr.close()[28d(B[0;1m[36mif[39m(B[m __name__ == (B[0;1m[32m"__main__"[39m(B[m:[29;5Hmain()[?12l[?25h[?25l[57;18H[28X[57;52H (B[0;7mM-D(B[m DOS Format            [86G           [103G  (B[0;7mM-A(B[m Append[42X[57;157H(B[0;7mM-B(B[m Backup File[K[58;2H(B[0;7mC(B[m Cancel[58;18H[27X[58;52H (B[0;7mM-M(B[m Mac Format            [86G[19X[58;105H(B[0;7mM-P(B[m Prepend            [58;137H[20X[58;157H(B[0;7m^T(B[m Browse[K[56d(B[0;7mFile Name to Write: test-redis.py                                                                                                                                                                                [56;34H(B[m[?12l[?25h[?25l[56;97H[1K (B[0;7m[ Writing... ](B[m[K[1;115H(B[0;7m [208G(B[m[56;96H(B[0;7m[ Wrote 289 lines ](B[m[57;18H(B[0;7m^O(B[m Write Out     (B[0;7m^W(B[m Where Is[52G(B[0;7m^K(B[m Cut           (B[0;7m^T(B[m Execute[86G(B[0;7m^C(B[m Location[103G(B[0;7mM-U(B[m Undo         (B[0;7mM-A(B[m Set Mark     (B[0;7mM-](B[m To Bracket   (B[0;7mM-Q(B[m Previous     (B[0;7m^B(B[m Back[57;188H(B[0;7m^◂(B[m Prev Word[58;2H(B[0;7mX(B[m Exit  [58;18H(B[0;7m^R(B[m Read File     (B[0;7m^\(B[m Replace[52G(B[0;7m^U(B[m Paste         (B[0;7m^J(B[m Justify[86G(B[0;7m^/(B[m Go To Line    (B[0;7mM-E(B[m Redo         (B[0;7mM-6(B[m Copy[58;137H(B[0;7m^Q(B[m Where Was     (B[0;7mM-W(B[m Next         (B[0;7m^F(B[m Forward[188G(B[0;7m^▸(B[m Next Word[?12l[?25h[29;11H[?25l[56d[J[58d[?12l[?25h[58;1H[?1049l[23;0;0t[?1l>[?2004l[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system/scripts[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system/scripts[00m$ nano init-redis-cache.sh
[?2004l[?2004h[?1049h[22;0;0t[1;58r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[56;99H(B[0;7m[ New File ](B[m[H(B[0;7m  GNU nano 7.2                                                                                   init-redis-cache.sh                                                                                             [1;208H(B[m[57d(B[0;7m^G(B[m Help[57;18H(B[0;7m^O(B[m Write Out     (B[0;7m^W(B[m Where Is[52G(B[0;7m^K(B[m Cut[57;69H(B[0;7m^T(B[m Execute[86G(B[0;7m^C(B[m Location[103G(B[0;7mM-U(B[m Undo[57;120H(B[0;7mM-A(B[m Set Mark     (B[0;7mM-](B[m To Bracket   (B[0;7mM-Q(B[m Previous     (B[0;7m^B(B[m Back[57;188H(B[0;7m^◂(B[m Prev Word[58d(B[0;7m^X(B[m Exit[58;18H(B[0;7m^R(B[m Read File     (B[0;7m^\(B[m Replace[52G(B[0;7m^U(B[m Paste[58;69H(B[0;7m^J(B[m Justify[86G(B[0;7m^/(B[m Go To Line    (B[0;7mM-E(B[m Redo[58;120H(B[0;7mM-6(B[m Copy[58;137H(B[0;7m^Q(B[m Where Was     (B[0;7mM-W(B[m Next[58;171H(B[0;7m^F(B[m Forward[188G(B[0;7m^▸(B[m Next Word[2d[?12l[?25h[?25l[56d[K[1;118H(B[0;7m*[208G(B[m[2;5H(B[0;1m[34mecho[35m -e[39m(B[m (B[0;1m[33m"${BLUE}"[3;5H[34mecho[39m(B[m (B[0;1m[33m"========================================"[4;5H[34mecho[39m(B[m (B[0;1m[33m"  REDIS CACHE INITIALIZATION"[5;5H[34mecho[39m(B[m (B[0;1m[33m"========================================"[6;5H[34mecho[35m -e[39m(B[m (B[0;1m[33m"${NC}"[7d(B[0m[42m    [8d[49m(B[mcheck_redis[9;5Hinit_device_status_cache[10;5Hinit_dashboard_cache[11;5Hinit_ota_cache[12;5Hinit_alerts_cache[13;5Hsetup_cache_warming[14d[42m    [15d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m""[16;5H[39m(B[mshow_cache_stats[17;5Htest_cache_performance[18d[42m    [19d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m""[20;5H[39m(B[mlog (B[0;1m[33m"🎉 Redis cache initialization completed successfully!"[21;5H[34mecho[39m(B[m (B[0;1m[33m""[22;5H[34mecho[35m -e[39m(B[m (B[0;1m[33m"${BLUE}Next Steps:${NC}"[23;5H[34mecho[39m(B[m (B[0;1m[33m"1. Test cache with: ${GREEN}python3 scripts/test-redis.py${NC}"[24;5H[34mecho[39m(B[m (B[0;1m[33m"2. Monitor cache: ${GREEN}docker-compose exec redis-cache redis-cli MONITOR${NC}"[25;5H[34mecho[39m(B[m (B[0;1m[33m"3. Check cache keys: ${GREEN}docker-compose exec redis-cache redis-cli KEYS 'doorlock:*'${NC}"[26d(B[0m[32m}[28d[36m# Run main function[29d[39m(B[mmain (B[0;1m[33m"$@"[39m(B[m[?12l[?25h[?25l[57;18H[28X[57;52H (B[0;7mM-D(B[m DOS Format            [86G           [103G  (B[0;7mM-A(B[m Append[42X[57;157H(B[0;7mM-B(B[m Backup File[K[58;2H(B[0;7mC(B[m Cancel[58;18H[27X[58;52H (B[0;7mM-M(B[m Mac Format            [86G[19X[58;105H(B[0;7mM-P(B[m Prepend            [58;137H[20X[58;157H(B[0;7m^T(B[m Browse[K[56d(B[0;7mFile Name to Write: init-redis-cache.sh                                                                                                                                                                          [56;40H(B[m[?12l[?25h[?25l[56;97H[1K (B[0;7m[ Writing... ](B[m[K[1;118H(B[0;7m [208G(B[m[56;96H(B[0;7m[ Wrote 277 lines ](B[m[57;18H(B[0;7m^O(B[m Write Out     (B[0;7m^W(B[m Where Is[52G(B[0;7m^K(B[m Cut           (B[0;7m^T(B[m Execute[86G(B[0;7m^C(B[m Location[103G(B[0;7mM-U(B[m Undo         (B[0;7mM-A(B[m Set Mark     (B[0;7mM-](B[m To Bracket   (B[0;7mM-Q(B[m Previous     (B[0;7m^B(B[m Back[57;188H(B[0;7m^◂(B[m Prev Word[58;2H(B[0;7mX(B[m Exit  [58;18H(B[0;7m^R(B[m Read File     (B[0;7m^\(B[m Replace[52G(B[0;7m^U(B[m Paste         (B[0;7m^J(B[m Justify[86G(B[0;7m^/(B[m Go To Line    (B[0;7mM-E(B[m Redo         (B[0;7mM-6(B[m Copy[58;137H(B[0;7m^Q(B[m Where Was     (B[0;7mM-W(B[m Next         (B[0;7m^F(B[m Forward[188G(B[0;7m^▸(B[m Next Word[?12l[?25h[29;10H[?25l[56d[J[58d[?12l[?25h[58;1H[?1049l[23;0;0t[?1l>[?2004l[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system/scripts[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system/scripts[00m$ cd ..
[?2004l[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system[00m$ [7mdocker-compose up -d redis-cache[27mdocker-compose up -d redis-cache
[?2004lCreating network "doorlock-system_doorlock-network" with driver "bridge"
Creating doorlock-redis ... 
[1A[2KCreating doorlock-redis ... [32mdone[0m[1B[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system[00m$ [7mdocker-compose logs redis-cache[27mdocker-compose logs redis-cache
[?2004lAttaching to doorlock-redis
[36mdoorlock-redis     |[0m 
[36mdoorlock-redis     |[0m *** FATAL CONFIG FILE ERROR (Redis 7.4.5) ***
[36mdoorlock-redis     |[0m Reading the configuration file, at line 24
[36mdoorlock-redis     |[0m >>> 'save 900 1      # Save if at least 1 key changed in 900 seconds'
[36mdoorlock-redis     |[0m Invalid save parameters
[36mdoorlock-redis     |[0m 
[36mdoorlock-redis     |[0m *** FATAL CONFIG FILE ERROR (Redis 7.4.5) ***
[36mdoorlock-redis     |[0m Reading the configuration file, at line 24
[36mdoorlock-redis     |[0m >>> 'save 900 1      # Save if at least 1 key changed in 900 seconds'
[36mdoorlock-redis     |[0m Invalid save parameters
[36mdoorlock-redis     |[0m 
[36mdoorlock-redis     |[0m *** FATAL CONFIG FILE ERROR (Redis 7.4.5) ***
[36mdoorlock-redis     |[0m Reading the configuration file, at line 24
[36mdoorlock-redis     |[0m >>> 'save 900 1      # Save if at least 1 key changed in 900 seconds'
[36mdoorlock-redis     |[0m Invalid save parameters
[36mdoorlock-redis     |[0m 
[36mdoorlock-redis     |[0m *** FATAL CONFIG FILE ERROR (Redis 7.4.5) ***
[36mdoorlock-redis     |[0m Reading the configuration file, at line 24
[36mdoorlock-redis     |[0m >>> 'save 900 1      # Save if at least 1 key changed in 900 seconds'
[36mdoorlock-redis     |[0m Invalid save parameters
[36mdoorlock-redis     |[0m 
[36mdoorlock-redis     |[0m *** FATAL CONFIG FILE ERROR (Redis 7.4.5) ***
[36mdoorlock-redis     |[0m Reading the configuration file, at line 24
[36mdoorlock-redis     |[0m >>> 'save 900 1      # Save if at least 1 key changed in 900 seconds'
[36mdoorlock-redis     |[0m Invalid save parameters
[36mdoorlock-redis     |[0m 
[36mdoorlock-redis     |[0m *** FATAL CONFIG FILE ERROR (Redis 7.4.5) ***
[36mdoorlock-redis     |[0m Reading the configuration file, at line 24
[36mdoorlock-redis     |[0m >>> 'save 900 1      # Save if at least 1 key changed in 900 seconds'
[36mdoorlock-redis     |[0m Invalid save parameters
[?2004h]0;meltedbrain@meltedbrain: ~/doorlock-system[01;32mmeltedbrain@meltedbrain[00m:[01;34m~/doorlock-system[00m$ docker-compose logs redis-cache[1@up -d[C[C[C[C[C[C[C[C[C[C[C[C[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kdown
[?2004lStopping doorlock-redis ... 
[1A[2KStopping doorlock-redis ... [32mdone[0m[1BRemoving doorlock-redis ... 
[1A[2KRemoving doorlock-redis ... [32mdone[0m[1BRemoving network doorlock-system_doorlock-network
[?2004h]0;meltedbrain@meltedbrain: